{"ast":null,"code":"import{useState,useCallback}from'react';import{Upload,Loader}from'lucide-react';import'./ImageSegmentation.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ImageSegmentation(){const[originalImage,setOriginalImage]=useState(null);const[segmentedImage,setSegmentedImage]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleImageUpload=useCallback(async file=>{if(!file)return;try{setLoading(true);setError(null);const formData=new FormData();formData.append('image',file);const response=await fetch('http://localhost:5000/segment',{method:'POST',body:formData});if(!response.ok){throw new Error('Failed to process image');}const data=await response.json();setOriginalImage(URL.createObjectURL(file));setSegmentedImage(\"data:image/png;base64,\".concat(data.image));}catch(err){setError(err.message);}finally{setLoading(false);}},[]);const onDrop=useCallback(e=>{e.preventDefault();const file=e.dataTransfer.files[0];if(file!==null&&file!==void 0&&file.type.startsWith('image/')){handleImageUpload(file);}},[handleImageUpload]);const onDragOver=useCallback(e=>{e.preventDefault();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Peakaboo Pixels\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-container\",onDrop:onDrop,onDragOver:onDragOver,children:[/*#__PURE__*/_jsx(\"p\",{className:\"upload-text\",children:\"Upload your image to remove it's background\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"imageInput\",accept:\"image/*\",style:{display:'none'},onChange:e=>handleImageUpload(e.target.files[0])}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageInput\",className:\"upload-button\",children:\"Choose Image\"})]}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(Loader,{className:\"animate-spin\"}),\"Processing image...\"]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),(originalImage||segmentedImage)&&/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"image-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-box\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"image-title\",children:\"Peek\"}),/*#__PURE__*/_jsx(\"div\",{className:\"image-wrapper\",children:originalImage&&/*#__PURE__*/_jsx(\"img\",{src:originalImage,alt:\"Original\",className:\"image\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-box\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"image-title\",children:\"aBoo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"image-wrapper\",children:segmentedImage&&/*#__PURE__*/_jsx(\"img\",{src:segmentedImage,alt:\"Segmented\",className:\"image\"})})]})]})})]});}export default ImageSegmentation;","map":{"version":3,"names":["useState","useCallback","Upload","Loader","jsx","_jsx","jsxs","_jsxs","ImageSegmentation","originalImage","setOriginalImage","segmentedImage","setSegmentedImage","loading","setLoading","error","setError","handleImageUpload","file","formData","FormData","append","response","fetch","method","body","ok","Error","data","json","URL","createObjectURL","concat","image","err","message","onDrop","e","preventDefault","dataTransfer","files","type","startsWith","onDragOver","className","children","id","accept","style","display","onChange","target","htmlFor","src","alt"],"sources":["C:/Users/rishi/OneDrive/Desktop/Web_Machine/React_web/image-segmentation/src/ImageSegmentation.js"],"sourcesContent":["import { useState, useCallback } from 'react';\r\nimport { Upload, Loader } from 'lucide-react';\r\nimport './ImageSegmentation.css';\r\n\r\nfunction ImageSegmentation() {\r\n  const [originalImage, setOriginalImage] = useState(null);\r\n  const [segmentedImage, setSegmentedImage] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const handleImageUpload = useCallback(async (file) => {\r\n    if (!file) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const formData = new FormData();\r\n      formData.append('image', file);\r\n\r\n      const response = await fetch('http://localhost:5000/segment', {\r\n        method: 'POST',\r\n        body: formData\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to process image');\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      setOriginalImage(URL.createObjectURL(file));\r\n      setSegmentedImage(`data:image/png;base64,${data.image}`);\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const onDrop = useCallback((e) => {\r\n    e.preventDefault();\r\n    const file = e.dataTransfer.files[0];\r\n    if (file?.type.startsWith('image/')) {\r\n      handleImageUpload(file);\r\n    }\r\n  }, [handleImageUpload]);\r\n\r\n  const onDragOver = useCallback((e) => {\r\n    e.preventDefault();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1 className=\"title\">Peakaboo Pixels</h1>\r\n\r\n      <div \r\n        className=\"upload-container\"\r\n        onDrop={onDrop}\r\n        onDragOver={onDragOver}\r\n      >\r\n        <p className=\"upload-text\">Upload your image to remove it's background</p>\r\n        <input\r\n          type=\"file\"\r\n          id=\"imageInput\"\r\n          accept=\"image/*\"\r\n          style={{ display: 'none' }}\r\n          onChange={(e) => handleImageUpload(e.target.files[0])}\r\n        />\r\n        <label htmlFor=\"imageInput\" className=\"upload-button\">\r\n          Choose Image\r\n        </label>\r\n      </div>\r\n\r\n      {loading && (\r\n        <div className=\"loading\">\r\n          <Loader className=\"animate-spin\" />\r\n          Processing image...\r\n        </div>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {(originalImage || segmentedImage) && (\r\n        <center><div className=\"image-grid\">\r\n          <div className=\"image-box\">\r\n            <h3 className=\"image-title\">Peek</h3>\r\n            <div className=\"image-wrapper\">\r\n              {originalImage && (\r\n                <img\r\n                  src={originalImage}\r\n                  alt=\"Original\"\r\n                  className=\"image\"\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"image-box\">\r\n            <h3 className=\"image-title\">aBoo</h3>\r\n            <div className=\"image-wrapper\">\r\n              {segmentedImage && (\r\n                <img\r\n                  src={segmentedImage}\r\n                  alt=\"Segmented\"\r\n                  className=\"image\"\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div></center>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImageSegmentation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}